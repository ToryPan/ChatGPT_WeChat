**ç®€ä»‹ï¼š**

æœªè®¤è¯å¾®ä¿¡å…¬ä¼—å·æŽ¥å…¥chatgptï¼ŒåŸºäºŽFlaskï¼Œå®žçŽ°ä¸ªäººå¾®ä¿¡å…¬ä¼—å·ã€æ— è®¤è¯ã€‘æŽ¥å…¥ChatGPTã€GPT-3.5-Turboã€‘

**èƒŒæ™¯ï¼š**

æœ€è¿‘çœ‹åˆ°ChatGPTæä¾›äº†APIæŽ¥å£ï¼Œæ‰‹ä¸Šåˆšå¥½æœ‰å°æœåŠ¡å™¨å’Œä¸€ä¸ªå…¬ä¼—å·ï¼Œæ‰€ä»¥æƒ³ç€å†™ä¸€ä¸ªèŠå¤©æœºå™¨äººðŸ¤–çŽ©ä¸€çŽ©ã€‚ä¸è¿‡åªæœ‰ä¸€ä¸ªæ²¡æœ‰è®¤è¯çš„ä¸ªäººå…¬ä¼—å·(èµ„æºæœ‰é™ðŸ˜­)ï¼Œè¿™ä¸ªå…¬ä¼—å·çš„é™åˆ¶å°±æ˜¯ï¼š

1.åªèƒ½è¢«åŠ¨å›žå¤ç”¨æˆ·æ¶ˆæ¯ï¼Œç”¨æˆ·å‘é€ä¸€æ¡æ¶ˆæ¯åˆ°å…¬ä¼—å·ï¼ŒæœåŠ¡å™¨åªèƒ½é’ˆå¯¹è¿™ä¸ªè¯·æ±‚å›žå¤ä¸€æ¡æ¶ˆæ¯ï¼Œä¸èƒ½å†é¢å¤–å›žå¤æ¶ˆæ¯(å®¢æœæ¶ˆæ¯)ï¼›

2.æ¯æ¬¡å¿…é¡»åœ¨15sä»¥å†…å›žå¤æ¶ˆæ¯ï¼Œå…¬ä¼—å·å¹³å°åœ¨å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨åŽï¼Œå¦‚æžœ5så†…æ²¡æ”¶åˆ°å›žå¤ï¼Œä¼šå†æ¬¡å‘é€è¯·æ±‚ç­‰å€™5ç§’ï¼Œå¦‚æžœè¿˜æ˜¯æ²¡æœ‰æ”¶åˆ°è¯·æ±‚ï¼Œæœ€åŽè¿˜ä¼šå‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œæ‰€ä»¥æœåŠ¡å™¨å¿…é¡»åœ¨15sä»¥å†…å®Œæ•´æ¶ˆæ¯çš„å¤„ç†ã€‚

å…·ä½“å¤„ç†æ–¹å¼æŸ¥çœ‹ä»£ç ã€‚æ–°æ‰‹é¡¹ç›®ï¼Œæœ‰ä¸è¶³ä¹‹å¤„è¿˜è¯·åŒ…å«å¹¶æ¬¢è¿ŽæŒ‡æ­£ï¼Œè°¢è°¢~

**éœ€æ±‚ï¼š**

ä¸€å°æœåŠ¡å™¨ï¼ˆéœ€è¦èƒ½è®¿é—®openaiæŽ¥å£çš„ï¼Œå¯èƒ½éœ€è¦æµ·å¤–çš„~ï¼‰

python(3.8)ä¸»è¦æ¨¡å—ï¼šflask, wechatpy

**æ¼”ç¤ºï¼š**

å…¬ä¼—å·ï¼šToryçš„å®žéªŒå®¤ï¼Œå…³æ³¨å‘é€æ¶ˆæ¯å³å¯ä½“éªŒã€‚

![image-20230305121520474](https://github.com/ToryPan/ChatGPT_WeChat/blob/main/pic/image-20230305121520474.png)

**ä½¿ç”¨æ–¹æ³•ï¼š**

è®¾ç½®myflask.pyé‡Œé¢çš„å‚æ•°ï¼š

```python
##############################openaiåŸºç¡€è®¾ç½®##########################
tokens = ['Bearer sk-XXX1','Bearer sk-XXX2']
max_tokens = 250
model = 'gpt-3.5-turbo'
temperature = 0.8
rsize = 200 # è®¾ç½®æ¯æ¡æ¶ˆæ¯çš„å›žå¤é•¿åº¦ï¼Œè¶…è¿‡é•¿åº¦å°†è¢«åˆ†å‰²
##############################wechatåŸºç¡€è®¾ç½®##########################
wechattoken = 'wechattoken'
```

å¯åŠ¨flask

```sh
export FLASK_APP=myflask

flask run --host=0.0.0.0 --port=80
# æˆ–è€…
nohup flask run --host=0.0.0.0 --port=80 >> /home/jupyter/flask/log/wechat.log 2>&1 &
```


